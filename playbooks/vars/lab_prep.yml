##########################################
# Org and Location that holds the labs
# The labs are defined with domains
##########################################
lab_org_name: "Lab Organization"
lab_location_name: "Lab Location"

################
# List of users
################
foreman_users:
  - username: labadmin
    password: change4me
    mail: shannon.mitchell@rackspace.com
    admin: yes
    default_organization: '{{ lab_org_name }}'
    default_location: '{{ lab_location_name }}'
    description: "Lab Admin"
    firstname: Lab
    lastname: Admin


#######################################
# Openstack project used for instances
#######################################

openstack_domain_name: "default"
openstack_domain_desc: "Shared LAB Project"
openstack_project_name: "labs-project"
openstack_project_desc: "Shared Lab Project"
openstack_project_admin_user: "labs-admin"
openstack_project_admin_pass: "change4me"
openstack_project_admin_desc: "LABS Domain Admin User"
openstack_project_admin_email: "shannon.mitchell@rackspace.com"

    
########################################################
# For vlans on ironic nodes, we will have to have a way
# to pre-define and check-in/check-out the static labs.
# The static labs, are just a collection of VLANS and 
# networks set up by netsec that is shared across all 
# ironic nodes in the phobos cluster.
########################################################
static_labs:
  - domain_name: "lab1.phobos.rpc.rackspace.com"
    domain_organizations: 
      - '{{ lab_org_name }}'
    domain_locations:
      - '{{ lab_location_name }}'
    domain_description: "LAB1 Static Domain"
    domain_parameters:
      - name: "type"
        value: "vlan"
        parameter_type: "string"
      - name: "in-use"
        value: "no"
        parameter_type: "string"
      - name: "internal_floating_ip"
        value: "172.20.64.10"
        parameter_type: "string"
      # external_floating_ip will need pulled from ironic after/during checkoug
    domain_subnets:
      - subnet_name: "LAB1-MGMT"
        subnet_description: "LAB1 management network with static VLANs"
        subnet_vlan: 289
        subnet_type: "IPv4"
        subnet_network: "172.20.64.0"
        subnet_mask: "255.255.252.0"
        subnet_ipam: "Internal DB"
        subnet_dhcp_from: "172.20.64.50"
        subnet_dhcp_to: "172.20.64.255"
        subnet_gateway: "172.20.64.1"
        subnet_bootmode: "Static"
      - subnet_name: "LAB1-STOR-MGMT"
        subnet_description: "LAB1 storage management network with static VLANs"
        subnet_vlan: 290
        subnet_type: "IPv4"
        subnet_network: "172.20.68.0"
        subnet_mask: "255.255.252.0"
        subnet_ipam: "Internal DB"
        subnet_dhcp_from: "172.20.68.50"
        subnet_dhcp_to: "172.20.68.255"
        subnet_gateway: "172.20.68.1"
        subnet_bootmode: "Static"
      - subnet_name: "LAB1-STORAGE"
        subnet_description: "LAB1 storage network with static VLANs"
        subnet_vlan: 291
        subnet_type: "IPv4"
        subnet_network: "172.20.72.0"
        subnet_mask: "255.255.252.0"
        subnet_ipam: "Internal DB"
        subnet_dhcp_from: "172.20.72.50"
        subnet_dhcp_to: "172.20.72.255"
        subnet_gateway: "172.20.72.1"
        subnet_bootmode: "Static"
      - subnet_name: "LAB1-TENANT"
        subnet_description: "LAB1 tenant network with static VLANs"
        subnet_vlan: 292
        subnet_type: "IPv4"
        subnet_network: "172.20.76.0"
        subnet_mask: "255.255.252.0"
        subnet_ipam: "Internal DB"
        subnet_dhcp_from: "172.20.76.50"
        subnet_dhcp_to: "172.20.76.255"
        subnet_gateway: "172.20.76.1"
        subnet_bootmode: "Static"
      - subnet_name: "LAB1-LBAAS"
        subnet_description: "LAB1 lbaas network with static VLANs"
        subnet_vlan: 293
        subnet_type: "IPv4"
        subnet_network: "172.20.80.0"
        subnet_mask: "255.255.252.0"
        subnet_ipam: "Internal DB"
        subnet_dhcp_from: "172.20.80.50"
        subnet_dhcp_to: "172.20.80.255"
        subnet_gateway: "172.20.80.1"
        subnet_bootmode: "Static"
      - subnet_name: "LAB1-INSIDE-NET"
        subnet_description: "LAB1 inside net network with static VLANs"
        subnet_vlan: 294
        subnet_type: "IPv4"
        subnet_network: "172.20.84.0"
        subnet_mask: "255.255.252.0"
        subnet_ipam: "Internal DB"
        subnet_dhcp_from: "172.20.84.50"
        subnet_dhcp_to: "172.20.84.255"
        subnet_gateway: "172.20.84.1"
        subnet_bootmode: "Static"
      - subnet_name: "LAB1-GW-NET"
        subnet_description: "LAB1 gateway net network with static VLANs"
        subnet_vlan: 295
        subnet_type: "IPv4"
        subnet_network: "172.20.88.0"
        subnet_mask: "255.255.252.0"
        subnet_ipam: "Internal DB"
        subnet_dhcp_from: "172.20.88.50"
        subnet_dhcp_to: "172.20.88.255"
        subnet_gateway: "172.20.88.1"
        subnet_bootmode: "Static"



#############################################################
# Variables to set up the compute profile to allow the
# foreman to spin up instances in the openstack environment
#############################################################

foreman_compute_resources_openstack:
  - name: "phobos-int.rpc.rackspace.com"
    url: "http://phobos-int.rpc.rackspace.com:5000/v3"
    user: '{{ openstack_project_admin_user }}'
    password: '{{ openstack_project_admin_pass }}'
    organization: '{{ lab_org_name }}'
    location: '{{ lab_location_name }}'
    tenant: '{{ openstack_project_name }}'
    domain: '{{ openstack_domain_name }}'
    description: "Phobos Openstack Cluster"
    images:
      - name: "baremetal-ubuntu-xenial"
        architecture: "x86_64"
        operatingsystem: "Ubuntu Xenial"
        uuid: "4ee7e5a8-05b2-473a-bc6a-44139ad9548a"
        username: "ubuntu"
        user_data: true
      - name: "baremetal-ubuntu-bionic"
        architecture: "x86_64"
        operatingsystem: "Ubuntu Bionic"
        uuid: "127e41bd-eb08-4214-bd58-d6b2d3a63ec1"
        username: "ubuntu"
        user_data: true

# List used to associate custom provisioning templates to
foreman_provisioning_template_operating_systems:
  - "Ubuntu Xenial"
  - "Ubuntu Bionic"


##################################################################
# Info for compute profiles
# These map out flavors to images along with some other settings
# to make provisioning easier. These values were pulled from
# the db after utilizing the GUI to set them.
##################################################################
foreman_compute_profiles:
  - name: "ironic-standard_baremetal-ubuntu-bionic"
    compute_attributes: 
      - compute_resource: "phobos-int.rpc.rackspace.com"
        vm_attrs:
          flavor_ref: '9'
          availability_zone: "nova"
          image_ref: "127e41bd-eb08-4214-bd58-d6b2d3a63ec1"
          tenant_id: "6725de754e5e4f0e914aed7ec1247da0"
          security_groups:
          - ''
          - default
          nics:
          - ''
          - "8dd6207d-a1f5-4dfe-b97d-a8c967eb8548"
          network: ''
          boot_from_volume: 'false'
          size_gb: ''
          scheduler_hint_filter: ''
  - name: "ironic-standard_baremetal-ubuntu-xenial"
    compute_attributes: 
      - compute_resource: "phobos-int.rpc.rackspace.com"
        vm_attrs:
          flavor_ref: '9'
          availability_zone: "nova"
          image_ref: "4ee7e5a8-05b2-473a-bc6a-44139ad9548a"
          tenant_id: "6725de754e5e4f0e914aed7ec1247da0"
          security_groups:
          - ''
          - default
          nics:
          - ''
          - "8dd6207d-a1f5-4dfe-b97d-a8c967eb8548"
          network: ''
          boot_from_volume: 'false'
          size_gb: ''
          scheduler_hint_filter: ''
  - name: "ironic-storage-perf_baremetal-ubuntu-bionic"
    compute_attributes: 
      - compute_resource: "phobos-int.rpc.rackspace.com"
        vm_attrs:
          flavor_ref: '14'
          availability_zone: "nova"
          image_ref: "127e41bd-eb08-4214-bd58-d6b2d3a63ec1"
          tenant_id: "6725de754e5e4f0e914aed7ec1247da0"
          security_groups:
          - ''
          - default
          nics:
          - ''
          - "8dd6207d-a1f5-4dfe-b97d-a8c967eb8548"
          network: ''
          boot_from_volume: 'false'
          size_gb: ''
          scheduler_hint_filter: ''
  - name: "ironic-storage-perf_baremetal-ubuntu-xenial"
    compute_attributes: 
      - compute_resource: "phobos-int.rpc.rackspace.com"
        vm_attrs:
          flavor_ref: '14'
          availability_zone: "nova"
          image_ref: "4ee7e5a8-05b2-473a-bc6a-44139ad9548a"
          tenant_id: "6725de754e5e4f0e914aed7ec1247da0"
          security_groups:
          - ''
          - default
          nics:
          - ''
          - "8dd6207d-a1f5-4dfe-b97d-a8c967eb8548"
          network: ''
          boot_from_volume: 'false'
          size_gb: ''
          scheduler_hint_filter: ''
        
      
           
#foreman=> select * from compute_attributes;
# id | compute_profile_id | compute_resource_id |      name       |                        vm_attrs                         |         created_at         |         updated_at         
#----+--------------------+---------------------+-----------------+---------------------------------------------------------+----------------------------+----------------------------
#  1 |                  4 |                   9 | ironic-standard | --- !ruby/hash:ActiveSupport::HashWithIndifferentAccess+| 2019-11-20 17:52:20.085768 | 2019-11-20 17:52:20.085768
#    |                    |                     |                 | flavor_ref: '9'                                        +|                            | 
#    |                    |                     |                 | availability_zone: nova                                +|                            | 
#    |                    |                     |                 | image_ref: 127e41bd-eb08-4214-bd58-d6b2d3a63ec1        +|                            | 
#    |                    |                     |                 | tenant_id: 6725de754e5e4f0e914aed7ec1247da0            +|                            | 
#    |                    |                     |                 | security_groups:                                       +|                            | 
#    |                    |                     |                 | - ''                                                   +|                            | 
#    |                    |                     |                 | - default                                              +|                            | 
#    |                    |                     |                 | nics:                                                  +|                            | 
#    |                    |                     |                 | - ''                                                   +|                            | 
#    |                    |                     |                 | - 8dd6207d-a1f5-4dfe-b97d-a8c967eb8548                 +|                            | 
#    |                    |                     |                 | network: ''                                            +|                            | 
#    |                    |                     |                 | boot_from_volume: 'false'                              +|                            | 
#    |                    |                     |                 | size_gb: ''                                            +|                            | 
#    |                    |                     |                 | scheduler_hint_filter: ''                              +|                            | 
#    |                    |                     |                 |                                                         |                            | 
#
    
